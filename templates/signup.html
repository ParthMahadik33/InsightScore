{% extends "base.html" %}

{% block title %}Sign up{% endblock %}

{% block switch %}
Already have an account?
<a href="{{ url_for('signin') }}">Sign in</a>
{% endblock %}

{% block heading %}Create your account{% endblock %}
{% block subheading %}It only takes a moment to get started.{% endblock %}

{% block form %}
<form method="post" action="{{ url_for('signup') }}" id="signupForm">
  <div class="field-group">
    <label for="role">Account Type</label>
    <div class="field-input">
      <select id="role" name="role" required style="width: 100%; padding: 10px 12px; border-radius: 11px; border: 1px solid rgba(148, 163, 184, 0.8); background: rgba(255, 255, 255, 0.7); font-size: 13px;">
        <option value="user">Regular User</option>
        <option value="lender">Money Lender</option>
      </select>
    </div>
  </div>

  <div class="field-group">
    <label for="username">Name</label>
    <div class="field-input">
      <input
        type="text"
        id="username"
        name="username"
        placeholder="Jane Doe"
        required
        autocomplete="name"
      />
    </div>
  </div>

  <div class="field-group" id="orgNameGroup" style="display: none;">
    <label for="org_name">Organization Name (Optional)</label>
    <div class="field-input">
      <input
        type="text"
        id="org_name"
        name="org_name"
        placeholder="ABC Finance Ltd."
        autocomplete="organization"
      />
    </div>
  </div>

  <div class="field-group" id="loanTypesGroup" style="display: none;">
    <label>Loan Types Offered</label>
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; margin-top: 6px;">
      {% for loan_type in loan_types %}
      <label style="display: flex; align-items: center; gap: 6px; font-size: 12px;">
        <input type="checkbox" name="loan_types" value="{{ loan_type }}" style="width: 14px; height: 14px;">
        {{ loan_type|title }}
      </label>
      {% endfor %}
    </div>
  </div>

  <div class="field-group">
    <label for="email">Email</label>
    <div class="field-input">
      <input
        type="email"
        id="email"
        name="email"
        placeholder="you@example.com"
        required
        autocomplete="email"
      />
    </div>
  </div>

  <div class="field-group">
    <label for="password">Password</label>
    <div class="field-input">
      <input
        type="password"
        id="password"
        name="password"
        placeholder="Create a password"
        required
        minlength="6"
        autocomplete="new-password"
      />
    </div>
  </div>

  <div class="field-group">
    <label for="confirm_password">Confirm password</label>
    <div class="field-input">
      <input
        type="password"
        id="confirm_password"
        name="confirm_password"
        placeholder="Repeat your password"
        required
        minlength="6"
        autocomplete="new-password"
      />
    </div>
    <div class="field-helper">
      Passwords should be at least 6 characters for better security.
    </div>
  </div>

  <div class="auth-footer-row">
    <div class="remember">
      <input
        type="checkbox"
        id="terms"
        required
        style="accent-color: #4f46e5; width: 14px; height: 14px"
      />
      <label for="terms">I agree to the terms</label>
    </div>

    <button type="submit" class="submit-btn">
      <span>Create account</span>
    </button>
  </div>

  <div class="divider">
    <span></span>
    Or
    <span></span>
  </div>

  <div class="field-helper">
    Already registered?
    <a href="{{ url_for('signin') }}" style="color: #1d4ed8; text-decoration: none"
      >Sign in instead</a
    >.
  </div>
</form>

<script>
  document.getElementById('role').addEventListener('change', function() {
    const isLender = this.value === 'lender';
    document.getElementById('orgNameGroup').style.display = isLender ? 'block' : 'none';
    document.getElementById('loanTypesGroup').style.display = isLender ? 'block' : 'none';
  });
</script>
{% endblock %}

